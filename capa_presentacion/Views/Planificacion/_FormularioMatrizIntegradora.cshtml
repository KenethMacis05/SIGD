<style>
    /* CSS personalizado */
    .select2-hidden {
        opacity: 0;
        position: absolute;
        width: 1px;
        height: 1px;
    }

    .input-group .select2-container {
        flex: 1 1 auto;
    }

    .input-group .select2-selection {
        height: 100%;
    }

    .input-group .select2-selection:focus {
        border-color: #86b7fe;
        outline: 0;
        box-shadow: 0 0 0 0.25rem rgba(13, 110, 253, 0.25);
    }
</style>

@model capa_entidad.MATRIZINTEGRACIONCOMPONENTES


@using (Html.BeginForm("GuardarMatrizIntegracion", "Planificacion", FormMethod.Post, new { @class = "card", @autocomplete = "off", @id = "formMatrizIntegradora", @novalidate = "novalidate" }))
{
    @Html.AntiForgeryToken()

    @Html.HiddenFor(m => m.id_matriz_integracion, new
    {
        id = "idMatriz"
    })

    <div class="card-header pb-0 border-bottom-0">
        <ul class="nav nav-tabs" id="myTab" role="tablist">
            <li class="nav-item">
                <button class="nav-link nav-link-tab active esp-link" id="generales-tab" data-bs-toggle="tab" data-bs-target="#generales" type="button" role="tab" aria-controls="generales" aria-selected="true">
                    Datos generales
                </button>
            </li>
            <li class="nav-item">
                <button class="nav-link nav-link-tab esp-link" id="competencias-tab" data-bs-toggle="tab" data-bs-target="#competencias" type="button" role="tab" aria-controls="competencias" aria-selected="false">
                    Competencias y Ejes
                </button>
            </li>
            <li class="nav-item">
                <button class="nav-link nav-link-tab esp-link" id="objetivos-tab" data-bs-toggle="tab" data-bs-target="#objetivos" type="button" role="tab" aria-controls="objetivos" aria-selected="false">
                    Objetivos y Contenidos
                </button>
            </li>
            <li class="nav-item">
                <button class="nav-link nav-link-tab esp-link" id="actividades-tab" data-bs-toggle="tab" data-bs-target="#actividades" type="button" role="tab" aria-controls="actividades" aria-selected="false">
                    Actividades
                </button>
            </li>
            <li class="nav-item">
                <button class="nav-link nav-link-tab esp-link" id="evaluacion-tab" data-bs-toggle="tab" data-bs-target="#evaluacion" type="button" role="tab" aria-controls="evaluacion" aria-selected="false">
                    Evaluación
                </button>
            </li>
            <li class="nav-item">
                <button class="nav-link nav-link-tab esp-link" id="aprendizaje-tab" data-bs-toggle="tab" data-bs-target="#aprendizaje" type="button" role="tab" aria-controls="aprendizaje" aria-selected="false">
                    Aprendizaje
                </button>
            </li>
        </ul>
    </div>
    <div class="card-body overflow-auto" style="max-height: 45vh;">
        <div class="tab-content" id="myTabContent">
            <!--Datos generales-->
            <div class="tab-pane fade show active" id="generales" role="tabpanel" aria-labelledby="generales-tab">
                <div class="row">
                    <div class="col col-md-4 col-sm-12">
                        <div class="input-group mb-3">
                            <span class="input-group-text">Código</span>
                            @Html.TextBoxFor(m => m.codigo, new
                            {
                                @class = "form-control",
                                @disabled = "disabled"
                            })
                        </div>
                    </div>
                    <div class="col col-md-4 col-sm-12">
                        <div class="input-group mb-3">
                            <span class="input-group-text">Nombre</span>
                            @Html.TextBoxFor(m => m.nombre, new
                            {
                                @class = "form-control",
                                required = "required",
                                @oninvalid = "this.setCustomValidity('El nombre es requerido')",
                                @oninput = "setCustomValidity('')",
                                maxlength = "255"
                            })
                        </div>
                    </div>
                    <div class="col col-md-4 col-sm-12">
                        <div class="input-group mb-3">
                            <label for="inputGroupSelectAsignatura" class="input-group-text">Asignatura</label>
                            <input type="hidden" name="fk_asignatura_activa" id="fk_asignatura_activa" value="@Model.fk_asignatura" />
                            @Html.DropDownListFor(m => m.fk_asignatura,
                                new SelectList(Enumerable.Empty<SelectListItem>(), "Value", "Text"),
                                "Seleccione una asignatura...",
                                new
                                {
                                    @class = "form-select select2-hidden",
                                    required = "required",
                                    @oninvalid = "this.setCustomValidity('La asignatura es requerida')",
                                    @oninput = "setCustomValidity('')",
                                    id = "inputGroupSelectAsignatura"
                                })
                        </div>
                    </div>
                </div>
                <hr />
                <div class="row">
                    <div class="col col-md-4 col-sm-12">
                        <div class="input-group mb-3">
                            <span class="input-group-text">Profesor</span>
                            @Html.TextBoxFor(m => m.usuario, new
                           {
                               @class = "form-control",
                               @disabled = "disabled"
                           })
                        </div>
                    </div>
                    <div class="col col-md-4 col-sm-12">
                        <div class="input-group mb-3">
                            <label for="inputGroupSelectPeriodo" class="input-group-text">Periodo</label>
                            <input type="hidden" name="fk_periodo_activo" id="fk_periodo_activo" value="@Model.fk_periodo" />
                            @Html.DropDownListFor(m => m.fk_periodo,
                              new SelectList(Enumerable.Empty<SelectListItem>(), "Value", "Text"),
                              "Seleccione un periodo...",
                              new
                              {
                                  @class = "form-select select2-hidden",
                                  required = "required",
                                  @oninvalid = "this.setCustomValidity('El periodo es requerido')",
                                  @oninput = "setCustomValidity('')",
                                  id = "inputGroupSelectPeriodo"
                              })
                        </div>
                    </div>
                    <div class="col col-md-4 col-sm-12">
                        <div class="input-group mb-3">
                            <span class="input-group-text">Inicio/Fin</span>
                            @{
                                var fecha = Model?.fecha_registro.ToString("yyyy-MM-dd");

                                if (fecha == "0001-01-01")
                                {
                                    fecha = DateTime.Today.ToString("yyyy-MM-dd");
                                }
                            }

                            @Html.TextBoxFor(m => m.fecha_registro, "{0:yyyy-MM-dd}", new
                            {
                                @type = "date",
                                @class = "form-control",
                                required = "required",
                                @oninvalid = "this.setCustomValidity('La fecha de inicio es requerida')",
                                @oninput = "setCustomValidity('')",
                                @Value = fecha
                            })
                        </div>
                    </div>
                </div>
                <hr />
                <div class="row">
                    <div class="col col-md-4 col-sm-12">
                        <div class="input-group mb-3">
                            <label for="inputGroupSelectArea" class="input-group-text">Área de Conocimiento</label>
                            <input type="hidden" name="fk_area_activa" id="fk_area_activa" value="@Model.fk_area" />
                            @Html.DropDownListFor(m => m.fk_area,
                              new SelectList(Enumerable.Empty<SelectListItem>(), "Value", "Text"),
                              "Seleccione una área de conocimiento...",
                              new
                              {
                                  @class = "form-select select2-hidden",
                                  required = "required",
                                  @oninvalid = "this.setCustomValidity('El área de conocimiento es requerida')",
                                  @oninput = "setCustomValidity('')",
                                  id = "inputGroupSelectArea"
                              })
                        </div>
                    </div>
                    <div class="col col-md-4 col-sm-12">
                        <div class="input-group mb-3">
                            <label for="inputGroupSelectDepartamento" class="input-group-text">Departamento</label>
                            <input type="hidden" name="fk_departamento_activo" id="fk_departamento_activo" value="@Model.fk_departamento" />
                            @Html.DropDownListFor(m => m.fk_departamento,
                              new SelectList(Enumerable.Empty<SelectListItem>(), "Value", "Text"),
                              "Seleccione un departamento...",
                              new
                              {
                                  @class = "form-select select2-hidden",
                                  required = "required",
                                  @oninvalid = "this.setCustomValidity('El departamento es requerida')",
                                  @oninput = "setCustomValidity('')",
                                  id = "inputGroupSelectDepartamento"
                              })
                        </div>
                    </div>
                    <div class="col col-md-4 col-sm-12">
                        <div class="input-group mb-3">
                            <label for="inputGroupSelectCarrera" class="input-group-text">Carrera</label>
                            <input type="hidden" name="fk_carrera_activa" id="fk_carrera_activa" value="@Model.fk_carrera" />
                            @Html.DropDownListFor(m => m.fk_carrera,
                              new SelectList(Enumerable.Empty<SelectListItem>(), "Value", "Text"),
                              "Seleccione una carrera...",
                              new
                              {
                                  @class = "form-select select2-hidden",
                                  required = "required",
                                  @oninvalid = "this.setCustomValidity('La carrera es requerida')",
                                  @oninput = "setCustomValidity('')",
                                  id = "inputGroupSelectCarrera"
                              })
                        </div>
                    </div>
                </div>
            </div>

            <!--Competencias y Ejes-->
            @*<div class="tab-pane fade" id="competencias" role="tabpanel" aria-labelledby="competencias-tab">
                <div class="row">
                    <div class="col col-md-12 col-sm-12 mb-3">
                        <div class="card border-left-primary shadow-sm">
                            <div class="card-header">
                                <i class="fa fa-lightbulb fa-lg text-primary me-2"></i>
                                <label class="form-label fs-5 fw-medium mb-0">Competencias</label>
                            </div>
                            <div class="card-body">
                                @Html.TextAreaFor(m => m.competencias, 5, 50, new
                                {
                                    @class = "form-control",
                                    id = "competenciasSummernote",
                                    required = "required",
                                    @oninvalid = "this.setCustomValidity('Las competencias son requeridas')",
                                    @oninput = "setCustomValidity('')",
                                    maxlength = "1000"
                                })
                            </div>
                        </div>
                    </div>
                </div>

                <hr />

                <div class="row">
                    <div class="col col-md-12 col-sm-12 mb-3">
                        <div class="card border-left-success shadow-sm">
                            <div class="card-header">
                                <i class="fa fa-stream fa-lg text-success me-2"></i>
                                <label class="form-label fs-5 fw-medium mb-0">Ejes</label>
                            </div>
                            <div class="card-body">
                                @Html.TextAreaFor(m => m.ejes, 3, 50, new
                                {
                                    @class = "form-control",
                                    id = "ejesSummernote",
                                    required = "required",
                                    @oninvalid = "this.setCustomValidity('Los ejes son requeridos')",
                                    @oninput = "setCustomValidity('')",
                                    maxlength = "1000"
                                })
                            </div>
                        </div>
                    </div>
                </div>

                <hr />

                <div class="row">
                    <div class="col col-md-12 col-sm-12 mb-3">
                        <div class="card border-left-info shadow-sm">
                            <div class="card-header">
                                <i class="fa fa-bullseye fa-lg text-info me-2"></i>
                                <label class="form-label fs-5 fw-medium mb-0">BOA</label>
                            </div>
                            <div class="card-body">
                                @Html.TextAreaFor(m => m.BOA, 2, 50, new
                                {
                                    @class = "form-control",
                                    id = "boaSummernote",
                                    required = "required",
                                    @oninvalid = "this.setCustomValidity('El BOA es requerido')",
                                    @oninput = "setCustomValidity('')",
                                    maxlength = "500"
                                })
                            </div>
                        </div>
                    </div>
                </div>
            </div>*@

            <!--Objetivos y Contenidos-->
            @*<div class="tab-pane fade" id="objetivos" role="tabpanel" aria-labelledby="objetivos-tab">
                <div class="row">
                    <div class="col col-md-6 col-sm-12 mb-3">
                        <div class="card border-left-warning shadow-sm">
                            <div class="card-header">
                                <i class="fa fa-bullseye fa-lg text-warning me-2"></i>
                                <label class="form-label fs-5 fw-medium mb-0">Objetivo de Aprendizaje</label>
                            </div>
                            <div class="card-body">
                                @Html.TextAreaFor(m => m.objetivo_aprendizaje, 3, 50, new
                                {
                                    @class = "form-control",
                                    id = "objetivoSummernote",
                                    required = "required",
                                    @oninvalid = "this.setCustomValidity('El objetivo de aprendizaje es requerido')",
                                    @oninput = "setCustomValidity('')",
                                    maxlength = "500"
                                })
                            </div>
                        </div>
                    </div>
                    <div class="col col-md-6 col-sm-12 mb-3">
                        <div class="card border-left-secondary shadow-sm">
                            <div class="card-header">
                                <i class="fa fa-book fa-lg text-secondary me-2"></i>
                                <label class="form-label fs-5 fw-medium mb-0">Tema / Contenido</label>
                            </div>
                            <div class="card-body">
                                @Html.TextAreaFor(m => m.tema_contenido, 3, 50, new
                                {
                                    @class = "form-control",
                                    id = "temaSummernote",
                                    required = "required",
                                    @oninvalid = "this.setCustomValidity('El tema/contenido es requerido')",
                                    @oninput = "setCustomValidity('')",
                                    maxlength = "500"
                                })
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col col-md-12 col-sm-12 mb-3">
                        <div class="card border-left-dark shadow-sm">
                            <div class="card-header">
                                <i class="fa fa-flag fa-lg text-dark me-2"></i>
                                <label class="form-label fs-5 fw-medium mb-0">Indicador de Logro</label>
                            </div>
                            <div class="card-body">
                                @Html.TextAreaFor(m => m.indicador_logro, 2, 50, new
                                {
                                    @class = "form-control",
                                    id = "indicadorSummernote",
                                    required = "required",
                                    @oninvalid = "this.setCustomValidity('El indicador de logro es requerido')",
                                    @oninput = "setCustomValidity('')",
                                    maxlength = "300"
                                })
                            </div>
                        </div>
                    </div>
                </div>
            </div>*@

            <!--Actividades-->
            @*<div class="tab-pane fade" id="actividades" role="tabpanel" aria-labelledby="actividades-tab">
                <div class="row">
                    <div class="col col-md-12 col-sm-12 mb-3">
                        <div class="card border-left-success shadow-sm">
                            <div class="card-header">
                                <i class="fa fa-play fa-lg text-success me-2"></i>
                                <label class="form-label fs-5 fw-medium mb-0">Tareas Iniciales</label>
                            </div>
                            <div class="card-body">
                                @Html.TextAreaFor(m => m.tareas_iniciales, 2, 50, new
                                {
                                    @class = "form-control",
                                    id = "inicialesSummernote",
                                    required = "required",
                                    @oninvalid = "this.setCustomValidity('Las tareas iniciales son requeridas')",
                                    @oninput = "setCustomValidity('')",
                                    maxlength = "500"
                                })
                            </div>
                        </div>
                    </div>
                </div>

                <hr />

                <div class="row">
                    <div class="col col-md-12 col-sm-12 mb-3">
                        <div class="card border-left-primary shadow-sm">
                            <div class="card-header">
                                <i class="fa fa-forward fa-lg text-primary me-2"></i>
                                <label class="form-label fs-5 fw-medium mb-0">Tareas de Desarrollo</label>
                            </div>
                            <div class="card-body">
                                @Html.TextAreaFor(m => m.tareas_desarrollo, 2, 50, new
                                {
                                    @class = "form-control",
                                    id = "desarrolloSummernote",
                                    required = "required",
                                    @oninvalid = "this.setCustomValidity('Las tareas de desarrollo son requeridas')",
                                    @oninput = "setCustomValidity('')",
                                    maxlength = "1000"
                                })
                            </div>
                        </div>
                    </div>
                </div>

                <hr />

                <div class="row">
                    <div class="col col-md-12 col-sm-12 mb-3">
                        <div class="card border-left-info shadow-sm">
                            <div class="card-header">
                                <i class="fa fa-check fa-lg text-info me-2"></i>
                                <label class="form-label fs-5 fw-medium mb-0">Tareas de Síntesis</label>
                            </div>
                            <div class="card-body">
                                @Html.TextAreaFor(m => m.tareas_sintesis, 2, 50, new
                                {
                                    @class = "form-control",
                                    id = "sintesisSummernote",
                                    required = "required",
                                    @oninvalid = "this.setCustomValidity('Las tareas de síntesis son requeridas')",
                                    @oninput = "setCustomValidity('')",
                                    maxlength = "500"
                                })
                            </div>
                        </div>
                    </div>
                </div>
            </div>*@

            <!--Evaluación-->
            @*<div class="tab-pane fade" id="evaluacion" role="tabpanel" aria-labelledby="evaluacion-tab">
                <div class="row">
                    <div class="col col-md-6 col-sm-12 mb-3">
                        <div class="card border-left-danger shadow-sm">
                            <div class="card-header">
                                <i class="fa fa-tasks fa-lg text-danger me-2"></i>
                                <label class="form-label fs-5 fw-medium mb-0">Estrategia de Evaluación</label>
                            </div>
                            <div class="card-body">
                                @Html.TextAreaFor(m => m.estrategia_evaluacion, 2, 50, new
                                {
                                    @class = "form-control",
                                    id = "estrategiaSummernote",
                                    required = "required",
                                    @oninvalid = "this.setCustomValidity('La estrategia de evaluación es requerida')",
                                    @oninput = "setCustomValidity('')",
                                    maxlength = "500"
                                })
                            </div>
                        </div>
                    </div>
                    <div class="col col-md-6 col-sm-12 mb-3">
                        <div class="card border-left-danger shadow-sm">
                            <div class="card-header">
                                <i class="fa fa-tasks fa-lg text-danger me-2"></i>
                                <label class="form-label fs-5 fw-medium mb-0">Tipo de Evaluación</label>
                            </div>
                            <div class="card-body">
                                @Html.TextAreaFor(m => m.tipo_evaluacion, 2, 50, new
                                {
                                    @class = "form-control",
                                    id = "tipoEvaluacionSummernote",
                                    required = "required",
                                    @oninvalid = "this.setCustomValidity('El tipo de evaluación es requerido')",
                                    @oninput = "setCustomValidity('')",
                                    maxlength = "500"
                                })
                            </div>
                        </div>
                    </div>
                    <div class="col col-md-6 col-sm-12 mb-3">
                        <div class="card border-left-warning shadow-sm">
                            <div class="card-header">
                                <i class="fa fa-clipboard-list fa-lg text-warning me-2"></i>
                                <label class="form-label fs-5 fw-medium mb-0">Instrumento de Evaluación</label>
                            </div>
                            <div class="card-body">
                                @Html.TextAreaFor(m => m.instrumento_evaluacion, 2, 50, new
                                {
                                    @class = "form-control",
                                    id = "instrumentoSummernote",
                                    required = "required",
                                    @oninvalid = "this.setCustomValidity('El instrumento de evaluación es requerido')",
                                    @oninput = "setCustomValidity('')",
                                    maxlength = "300"
                                })
                            </div>
                        </div>
                    </div>
                    <div class="col col-md-6 col-sm-12 mb-3">
                        <div class="card border-left-primary shadow-sm">
                            <div class="card-header">
                                <i class="fa fa-lightbulb fa-lg text-primary me-2"></i>
                                <label class="form-label fs-5 fw-medium mb-0">Evidencias de Aprendizaje</label>
                            </div>
                            <div class="card-body">
                                @Html.TextAreaFor(m => m.evidencias_aprendizaje, 2, 50, new
                                {
                                    @class = "form-control",
                                    id = "evidenciasSummernote",
                                    required = "required",
                                    @oninvalid = "this.setCustomValidity('Las evidencias de aprendizaje son requeridas')",
                                    @oninput = "setCustomValidity('')",
                                    maxlength = "500"
                                })
                            </div>
                        </div>
                    </div>
                </div>
            </div>*@

            <!--Aprendizaje-->
            @*<div class="tab-pane fade" id="aprendizaje" role="tabpanel" aria-labelledby="aprendizaje-tab">
                <div class="row">
                    <div class="col col-md-12 col-sm-12 mb-3">
                        <div class="card border-left-info shadow-sm">
                            <div class="card-header">
                                <i class="fa fa-graduation-cap fa-lg text-info me-2"></i>
                                <label class="form-label fs-5 fw-medium mb-0">Criterios de Aprendizaje</label>
                            </div>
                            <div class="card-body">
                                @Html.TextAreaFor(m => m.criterios_aprendizaje, 2, 50, new
                                {
                                    @class = "form-control",
                                    id = "criteriosSummernote",
                                    required = "required",
                                    @oninvalid = "this.setCustomValidity('Los criterios de aprendizaje son requeridos')",
                                    @oninput = "setCustomValidity('')",
                                    maxlength = "500"
                                })
                            </div>
                        </div>
                    </div>
                </div>

                <hr />

                <div class="row">
                    <div class="col col-md-12 col-sm-12 mb-3">
                        <div class="card border-left-secondary shadow-sm">
                            <div class="card-header">
                                <i class="fa fa-list-alt fa-lg text-secondary me-2"></i>
                                <label class="form-label fs-5 fw-medium mb-0">Indicadores de Aprendizaje</label>
                            </div>
                            <div class="card-body">
                                @Html.TextAreaFor(m => m.indicadores_aprendizaje, 2, 50, new
                                {
                                    @class = "form-control",
                                    id = "indicadoresSummernote",
                                    required = "required",
                                    @oninvalid = "this.setCustomValidity('Los indicadores de aprendizaje son requeridos')",
                                    @oninput = "setCustomValidity('')",
                                    maxlength = "500"
                                })
                            </div>
                        </div>
                    </div>
                </div>

                <hr />

                <div class="row">
                    <div class="col col-md-12 col-sm-12 mb-3">
                        <div class="card border-left-dark shadow-sm">
                            <div class="card-header">
                                <i class="fa fa-chart-line fa-lg text-dark me-2"></i>
                                <label class="form-label fs-5 fw-medium mb-0">Nivel de Aprendizaje</label>
                            </div>
                            <div class="card-body">
                                @Html.TextAreaFor(m => m.nivel_aprendizaje, 2, 50, new
                                {
                                    @class = "form-control",
                                    id = "nivelSummernote",
                                    required = "required",
                                    @oninvalid = "this.setCustomValidity('El nivel de aprendizaje es requerido')",
                                    @oninput = "setCustomValidity('')",
                                    maxlength = "300"
                                })
                            </div>
                        </div>
                    </div>
                </div>
            </div>*@
        </div>
    </div>

    <!-- Controles de navegación en el footer -->
    <div class="card-footer text-center">
        <div class="d-flex justify-content-between">
            <button type="button" class="btn btn-outline-danger" id="btnAnterior" style="display: none;">
                <i class="fa fa-arrow-left"></i>
            </button>

            <div>
                <a href="@Url.Action("Matriz_de_Integracion", "Planificacion")" class="btn btn-danger me-2">
                    <i class="fa fa-times"></i> Cancelar
                </a>
                <button type="submit" class="btn btn-primary" id="btnGuardar" style="display: none;">
                    <i class="fa fa-save"></i> @(Model.id_matriz_integracion == 0 ? "Guardar" : "Actualizar")
                </button>

                @if (Model.id_matriz_integracion != 0)
                {
                    <button type="submit" class="btn btn-primary" id="btnGuardar2">
                        <i class="fa fa-save"></i> Actualizar
                    </button>
                }
            </div>

            <button type="button" class="btn btn-outline-primary" id="btnSiguiente">
                <i class="fa fa-arrow-right"></i>
            </button>
        </div>
    </div>
}